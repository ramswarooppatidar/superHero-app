"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[67601],{75757:function(e,t,n){n.d(t,{r:function(){return Z},q:function(){return E}});var a=n(98788),i=n(45680),r=n(52322),o=n(24862),l=n(62197),c=n(701),s=n(72841),d=n(68052),u=n(9390),p=n(47999),m=n(27739),f=n(44699),v=n(81034),h=n(11174),y=n(88167),g=n(81372),_=n(87531),b=n(34006),C=n(73377),x=n(38204),T=n(21805),w=n(59877),N=n(47842),D=(0,n(98116).ZL)()(function(e){var t=e.palette,n=e.breakpoints,a=e.tokens,i=a.font,r=a.color,o=a.spacing;return{container:{display:"flex",justifyContent:"center",marginTop:21},flexRoot:{display:"flex",flexDirection:"column",alignItems:"center",background:r.white,width:"100%"},subTitle:{fontWeight:i.weight.bold,marginBottom:o.xxs},optionsSection:(0,N.Z)({display:"flex",flexFlow:"row",marginBottom:o.base,flexGrow:1,marginTop:o.s},n.down("md"),{flexFlow:"column"}),backButton:{fontSize:i.size.s,fontWeight:i.weight.bold,marginBottom:o.base},cancelTitle:{fontWeight:i.weight.bold,fontSize:i.size.l},cancelAtEndOfTermContainer:(0,N.Z)({backgroundColor:"#F3F4F5",padding:o.l,paddingBottom:o.s,display:"flex",flexDirection:"column",width:326},n.down("sm"),{backgroundColor:"initial",borderBottom:"1px solid #0c121c1f"}),highlightedContainer:{backgroundColor:"#F3F4F5"},cancelEarlyTitleContainer:{padding:o.l,paddingBottom:o.s,display:"flex",flexDirection:"column",width:326},description:{fontSize:i.size.s,lineHeight:i.lineHeight.s,marginTop:15},total:{fontSize:14,fontWeight:i.weight.bold},item:{fontSize:i.size.s,lineHeight:i.lineHeight.s},items:{display:"flex",flexDirection:"row",justifyContent:"space-between"},hr:{borderColor:"#0c121c1f",width:"100%",marginTop:4},itemPrice:{fontSize:i.size.m},totalPrice:{fontSize:i.size.m,fontWeight:900},taxNote:{fontSize:i.size.xs,fontWeight:i.weight.normal,marginTop:-6,alignSelf:"flex-end"},cancelEndOfTermBtn:(0,N.Z)({color:t.common.white,backgroundColor:t.secondary.main,"&:hover":{backgroundColor:t.secondary.dark,color:t.common.white},marginTop:o.l},n.up("md"),{marginTop:"auto",marginBottom:36}),cancelEarlyBtn:{marginTop:o.l},aboutNote:{fontSize:i.size.s,textDecoration:"underline",marginTop:15,textAlign:"center",cursor:"pointer"}}}),E="Flat fee cancellation",k={usd:40,aud:60,eur:37,gbp:31,chf:35,dkk:270,nok:420,sek:430,jpy:5700,inr:3300,krw:53e3,brl:200},I=function(e){var t=e.t,n=e.productDueDate,a=e.productName,i=e.currentAlottmentExpiration,o=e.commitmentRemaining,l=e.helpPath,c=e.totalCreditsRemaining;return{cancelAtEndOfTermTitle:t("cancellation:cancel_at_end_of_term_title"),back:t("back"),continue:t("continue"),aboutNote:t("cancellation:flat_fee_about_cancellation"),taxNote:t("cancellation:flat_fee_tax_note"),remainingFeeText:o>1?t("cancellation:flat_fee_remaining_text_plural",{COUNT:o}):t("cancellation:flat_fee_remaining_text_singular"),flatFeeCost:t("cancellation:flat_fee_cost"),monthlyCostText:t("cancellation:flat_fee_monthly_cost"),totalForEarlyOpt:t("cancellation:flat_fee_total_early"),totalForEndOfTermOpt:(0,r.jsx)(w.cC,{ns:d.ahM,i18nKey:t(o>1?"cancellation:flat_fee_total_end_of_term_plural":"cancellation:flat_fee_total_end_of_term_singular"),values:{COUNT:o}}),orderCreationError:(0,r.jsx)(w.cC,{t:t,ns:d.ahM,i18nKey:"cancellation:flat_fee_order_creation_error",components:{SupportLink:(0,r.jsx)(u.r,{underline:!0,style:{textDecoration:"underline"},clickAnalyticsLabel:"".concat(v.vn4,".").concat(v.Rqe),href:l})}}),cancelAtEndOfTermDescription:(0,r.jsx)(w.cC,{ns:d.ahM,i18nKey:"cancellation:flat_fee_cancel_end_of_term_description",values:{PRODUCT_DUE_DATE:n},components:{bold:(0,r.jsx)("strong",{})}}),cancelEarlyTitle:t("cancellation:cancel_early_title"),cancelEarlyDescription:(0,r.jsx)(w.cC,{ns:d.ahM,i18nKey:"cancellation:flat_fee_cancel_early_description",values:{PRODUCT_DUE_DATE:i},components:{bold:(0,r.jsx)("strong",{})}}),technicalIssuesLink:(0,r.jsx)(w.cC,{ns:d.ahM,i18nKey:"cancellation:technical_issues_link",components:{a:(0,r.jsx)(u.r,{href:"/help",target:"_blank",clickAnalyticsLabel:(0,C.U_)({pageSection:v.vn4,eventLabel:v.l4m})})}}),confirmPageTitle:t("cancellation:confirm_page_title",{PRODUCT_NAME:a}),earlyCancelationMessage:(0,r.jsx)(w.cC,{ns:d.ahM,i18nKey:"credit_rollover:early_cancelation_message",values:{TOTAL_CREDITS_REMAINING:c},components:{bold:(0,r.jsx)("strong",{})}})}},Z=function(e){var t,n=e.formattedExpirationDate,u=e.licenseName,N=e.onSubmit,Z=e.onPrevious,O=e.plan,R=e.churnSurveyResults,j=e.compareCancellationFeeWithMonthlyFee,S=(0,_.aQ)(),P=D(),A=P.classes,M=P.cx,z=(0,x.ad)(),F=(0,w.$G)(d.ahM).t,U=S(new Date(O.subscriptionExpiration)),L=function(e){return N({action:e})},B=I({t:F,productName:u,productDueDate:n,currentAlottmentExpiration:U,commitmentRemaining:O.commitmentRemaining,helpPath:z,totalCreditsRemaining:O.totalCreditsRemaining}),q=(0,b.cY)(O.id),K=O.commitmentRemaining<=1,W=(0,g.K)({productId:m.ue$}).data;if(W){var H,Q,G=k.usd<((null===(H=O.product)||void 0===H?void 0:null===(Q=H.prices)||void 0===Q?void 0:Q.usd)||0);void 0!==j&&j&&G?W.prices=O.product.prices:W.prices=k}var V=(0,y.LG)({product:W}),Y=(null==R?void 0:R.subReason)||(null==R?void 0:R.mainReason)||((null==R?void 0:R.other)?"anything_else":void 0),$=(0,h.Q)({productOverride:W,productId:m.ue$,subscriptionIdentifier:O.id,cancellationReason:E,cancellationReasonName:Y}),X=$.createOrderHandler,J=$.isCreateOrderInProgress,ee=$.orderStatus,et=(t=(0,a.Z)(function(){return(0,i.__generator)(this,function(e){return K?L("assistedEarlyCancel"):(T.Z.set("pwnext","true",{expires:new Date(new Date().getTime()+864e5)}),X()),[2]})}),function(){return t.apply(this,arguments)});return(0,r.jsx)(o.Z,{className:A.container,children:(0,r.jsxs)(o.Z,{component:"div",className:A.flexRoot,children:[(0,r.jsx)(l.Z,{variant:"subtitle1",className:A.subTitle,"data-automation":"CancelPlans_cancelOptionStep",children:B.confirmPageTitle}),(0,r.jsxs)(o.Z,{className:A.optionsSection,children:[O.autoRenewal&&(0,r.jsxs)(o.Z,{className:A.cancelAtEndOfTermContainer,"data-automation":"cancelAtEndOfTermContainer",children:[(0,r.jsx)(l.Z,{variant:"subtitle1",className:A.cancelTitle,children:B.cancelAtEndOfTermTitle}),(0,r.jsx)(l.Z,{variant:"body1",className:A.description,children:B.cancelAtEndOfTermDescription}),(0,r.jsx)(l.Z,{sx:{marginTop:"9px"},variant:"body1",className:A.description,children:B.remainingFeeText}),(0,r.jsx)(p.z,{clickTrack:(0,C.U_)({pageSection:v.vn4,eventLabel:v.$zE}),onClick:function(){return L("turnOffAutoRenewal")},onKeyDown:function(e){"Enter"===e.key&&L("turnOffAutoRenewal")},variant:"contained","aria-label":"Cancel at end of term","data-automation":"cancelAtEndOfTermCTA",className:A.cancelEndOfTermBtn,children:B.continue})]}),(0,r.jsxs)(o.Z,{className:M(A.cancelEarlyTitleContainer,!O.autoRenewal&&A.highlightedContainer),"data-automation":"cancelEarlyContainer",children:[(0,r.jsx)(l.Z,{variant:"subtitle1",className:A.cancelTitle,children:B.cancelEarlyTitle}),(null==ee?void 0:ee.status)===f.cM&&(0,r.jsx)(c.Z,{severity:"error",children:B.orderCreationError}),q&&(0,r.jsx)(c.Z,{severity:"warning",children:B.earlyCancelationMessage}),(0,r.jsx)(l.Z,{variant:"body1",className:A.description,children:B.cancelEarlyDescription}),!K&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(o.Z,{sx:{marginTop:"62px"},className:A.items,children:[(0,r.jsx)(l.Z,{variant:"body1",className:A.item,children:B.flatFeeCost}),(0,r.jsx)(l.Z,{variant:"body1",className:A.itemPrice,children:V})]}),(0,r.jsx)("hr",{className:A.hr}),(0,r.jsxs)(o.Z,{className:A.items,children:[(0,r.jsx)(l.Z,{variant:"body1",className:A.total,children:B.totalForEarlyOpt}),(0,r.jsx)(l.Z,{variant:"body1",className:A.totalPrice,"data-automation":"cancellationFeeTotalAmount",children:V})]}),(0,r.jsx)(l.Z,{variant:"body1",className:A.taxNote,children:B.taxNote})]}),(0,r.jsx)(p.z,{clickTrack:(0,C.U_)({pageSection:v.vn4,eventLabel:v.r25}),disabled:J,onClick:et,onKeyDown:function(e){"Enter"===e.key&&et()},"aria-label":"Cancel early with a fee",variant:"outlined",className:A.cancelEarlyBtn,"data-automation":"cancelEarlyWithFeeCTA",children:J?(0,r.jsx)(s.Z,{color:"inherit",size:24}):B.continue}),(0,r.jsx)(l.Z,{variant:"body1",className:A.aboutNote,onClick:function(){window.open("https://support.shutterstock.com/s/article/Does-Shutterstock-charge-any-cancellation-fees","_blank")},children:B.aboutNote})]})]}),(0,r.jsx)(p.z,{clickTrack:(0,C.U_)({pageSection:v.vn4,eventLabel:v.pPK}),onClick:Z,variant:"text",className:A.backButton,children:B.back})]})})}},11174:function(e,t,n){n.d(t,{Q:function(){return et}});var a,i=n(98788),r=n(47842),o=n(70865),l=n(96670),c=n(87394),s=n(45680),d=n(75757),u=n(27739),p=n(44699),m=n(7297),f=n(7819),v=n(22565),h=n(65532),y=n(50308),g=n(9206),_=n(66970),b=n(81740),C=n(56398),x=n(83835),T=n(19522),w=n(97258),N=n(8149),D=n(44297),E=n(49670),k=n(9009),I=function(e){switch(e.paymentMethod){case C.M2:return{paymentId:e.id,expirationMonth:e.creditCard.expMonth,expirationYear:e.creditCard.expYear,maskedNumber:e.creditCard.maskedNumber,cardType:e.creditCard.type,isDefault:e.isDefault,paymentMethod:e.paymentMethod,businessUnit:e.businessUnit};case C.Eq:return{paymentId:e.id,bic:e.sepaDirectDebit.bic,maskedIBAN:e.sepaDirectDebit.maskedIban,isDefault:e.isDefault,paymentMethod:e.paymentMethod,businessUnit:e.businessUnit};case C.YR:return{paymentId:e.id,isDefault:e.isDefault,paymentMethod:e.paymentMethod,businessUnit:e.businessUnit,email:e.email};default:return null}},Z=function(e){var t=e.paymentProfiles,n=void 0===t?[]:t;return Array.isArray(n)&&0!==n.length?I(n.find(function(e){return!0===e.isDefault})||n[0]):null},O=function(e){var t=e.orderItems,n=e.license,a=e.country,i=e.debitableIdentifier,r=e.selectedShadowsOption,l=e.freeTrialCredits,c=e.freeTrialDuration;return(void 0===t?[]:t).map(function(e){var t=e.product,s=void 0===t?{}:t,d=s.id,p=s.eligibleForRebilling,m=s.seatCount,v=e.productType,h=e.assets,y=e.paymentMethod,g=e.subscriptionIdentifier,_=e.cancellationReason,b=e.cancellationReasonName,E=g&&_?(0,o.Z)({subscription_identifier:g,cancellation_reason:_},b&&{cancellation_reason_name:b}):{},k=[];return m&&(E.seat_count=m),(null==y?void 0:y.type)!==C.xt&&(E.subscription_id=null==y?void 0:y.id),(null==h?void 0:h.length)&&(k=h.map(function(e){var t=e.asset,a=e.selectedAssetSize,i=(null==t?void 0:t.type)===N.tn,l=t.overrideAssetTypeForMusicOrder?t.overrideAssetTypeForMusicOrder:(0,D._L)(t);return(0,o.Z)({type:l,id:t.id,license:n},t.overrideAssetTypeForMusicOrder&&!i&&{format:w.vD,size:w.vD},(null==a?void 0:a.size)&&!i&&{size:a.size},(null==a?void 0:a.format)&&{format:a.format},l===N.IK&&{headline:t.title},l===N.k4&&t.imageType===N.w5&&(0,o.Z)({angle:t.angle||x.U,content_provider:N._R},(null==a?void 0:a.format)!==T.YU&&{include_shadows:"on"===(r||"on").toLocaleLowerCase()}))})),E.auto_renewal=p&&v===f.Cs&&!u.ikm.includes(a)&&!u.yDj.includes(e.product.name),E.debitable_identifier=i,E.free_trial_credits=l,E.free_trial_duration=c,(0,o.Z)({product:{id:d,type:v||f.cs}},k&&{media:k},Object.keys(E).length>0&&{meta:E})})},R=function(e){var t=e.currency,n=e.country,a=e.paymentProfileId,i=e.items,r=e.couponCode;return{data:{type:"orders",attributes:{currency:t,items:i,country:n,payment_profile_id:a,coupons:r?[{type:"coupon",name:"coupon",coupon_code:r}]:[],client_data:{},vat_override:e.vatNumber||void 0}}}},j=(a=(0,i.Z)(function(e){var t,n,a,i,r,l,c,d,u,p,m,v,h,y,g,_,C,x,T,w,N,D,I;return(0,s.__generator)(this,function(s){return t=e.country,n=e.couponCode,a=e.currency,i=e.orderItems,r=e.selectedShadowsOption,l=e.paymentProfileId,c=e.vatNumber,u=void 0===(d=e.configs)?{}:d,m=void 0===(p=e.license)?f.ur:p,h=void 0===(v=e.debitableIdentifier)?void 0:v,g=void 0===(y=e.freeTrialCredits)?void 0:y,C=void 0===(_=e.freeTrialDuration)?void 0:_,T=void 0!==(x=e.showP32433Cad)&&x,w=O((0,o.Z)({orderItems:i,license:m,country:t,debitableIdentifier:h,selectedShadowsOption:r},g&&{freeTrialCredits:g},C&&{freeTrialDuration:C})),N=T&&"CAD"||a,D=(0,b.Tn)().formattedUrl,I=R({country:t,couponCode:n,currency:N,items:w,paymentProfileId:l,vatNumber:c}),[2,E.uS.post(D,I,u).then(function(e){return{headers:e.headers,data:(0,k.O)(e.data)}})]})}),function(e){return a.apply(this,arguments)}),S=n(87414),P=function(e){var t=e.couponCode,n=e.productName,a=null;return n===u.Pvj&&t===u.XdV?a=u.E65:n===u.fnR&&t===u.Q9B&&(a=u.Em3),a},A=n(38419),M=n(18167),z=n(38367),F=n(59979),U=n(70008),L=n(40233),B=n(12649),q=n(88436),K=n(25936),W=n(24114),H=n(38204),Q=n(31683),G=n(34406).env.NODE_CONFIG_ENV,V=function(){var e=(0,Q.u4)()?"production":"qa";switch(G||e){case"dev":return"65021";case"qa":return"12424";case"production":return"14156";default:return"NO_ENV_DEFINED"}},Y=function(){var e=(0,Q.u4)()?"production":"qa";switch(G||e){case"dev":return"65035";case"qa":return"19606";case"production":return"17383";default:return"NO_ENV_DEFINED"}},$=n(21805),X=n(5632),J=n(2784),ee=function(e){var t,n=e.couponCode,a=e.displayInlineCancellationFlow,i=(0,X.useRouter)(),l=(0,v.v)(),c=!!(null==l?void 0:null===(t=l.current)||void 0===t?void 0:t.isPeacock);return(0,J.useCallback)(function(e){var t,l=e.orderId,s=(0,A.DW)({language:i.locale,relativePath:(0,H.U2)({queryParams:(0,o.Z)({orderId:l},(null==i?void 0:i.query)||{},c&&{isCreativeAiOrder:"true"},n?(t={},(0,r.Z)(t,f.d9,n),(0,r.Z)(t,f.Gp,n),t):{},a&&{display:"inlineCancellationFlow"})})});i.push(s)},[n,c,i,a])},et=function(e){var t=e.products,n=e.asset,a=e.assetSize,v=e.couponCode,b=e.productId,C=e.productType,x=void 0===C?f.Cs:C,T=e.productOverride,w=e.seatCount,N=e.setCreateOrderStatus,E=void 0===N?function(){}:N,k=e.setIsInvalidCoupon,I=void 0===k?function(){}:k,O=e.vatNumber,R=e.license,A=e.isLicenseDrawer,H=void 0!==A&&A,Q=e.preset,G=e.eligibilityData,et=void 0===G?{}:G,en=e.existingUserRedirectPath,ea=e.selectedShadowsOption,ei=e.shouldForceAsset,er=e.subscriptionIdentifier,eo=e.cancellationReason,el=e.freeTrialCredits,ec=void 0===el?void 0:el,es=e.freeTrialDuration,ed=void 0===es?void 0:es,eu=e.cancellationReasonName,ep=(0,h.PE)().region,em=(0,U.B)().isIndiaRegion,ef=(0,B.jy)().data,ev=(0,K.u)().data,eh=(0,B.B)(),ey=(0,q.r)(),eg=(0,c.Z)((0,J.useState)(!1),2),e_=eg[0],eb=eg[1],eC=(0,c.Z)((0,W.QD)(n)||[],2)[1],ex=et.eligibilityCurrency,eT=et.debitableIdentifier,ew=(0,J.useMemo)(function(){return null!=T?T:(0,o.Z)({},(0,S.$A)(t,b),w?{seatCount:w}:{})},[T,b,t,w]),eN=null==ew?void 0:ew.id,eD=(0,X.useRouter)().asPath,eE=(0,y.E)({prices:null==ew?void 0:ew.prices}),ek=(0,g.R)(),eI=(0,z.Z)({shouldFetch:!!eh}).data,eZ=v||ew.couponCode,eO=P({couponCode:eZ,productName:null==ew?void 0:ew.name}),eR=(0,F.Sl)({queryParams:(0,o.Z)({landing_page:(0,M.t)((0,o.Z)({couponCode:eZ,productId:eN,vatNumber:O,seatCount:null==ew?void 0:ew.seatCount,doNotRedirect:!0,asset:em||void 0!==ei&&ei?n:void 0,existingUserRedirect:en||eC,license:R},ed&&{freeTrialDuration:ed},ec&&{freeTrialCredits:ec}))},Q&&{preset:Q}),signUpView:eO}),ej=(0,J.useCallback)(function(){if(window){var e,t;$.Z.set("referer_page",eD),null===(e=window.NREUM)||void 0===e||null===(t=e.addPageAction)||void 0===t||t.call(e,"UP3-1623 assign loggedOutHandler authRedirectPath to href",(0,l.Z)((0,o.Z)({},window.location||{}),{asPath:eD,authRedirectPath:eR})),window.location.href=eR}},[eD,eR]),eS=Z({paymentProfiles:eI}),eP=(0,J.useCallback)(function(e){var t,n,a={createTime:null==ef?void 0:ef.createTime,component:"useCreateOrder.js",errorCode:e.code,errorStatus:e.status,errorDetail:e.detail,errorMessage:e.message,errorStack:e.stack||"useCreateOrder",errorTitle:e.title,impersonatorId:ev.impersonatorId,msg:"UP1-2650 Order creation failed",organizationId:null==ef?void 0:ef.organizationId,referrerPath:window.location.pathname,referrerQuery:window.location.search,userId:null==ef?void 0:ef.id,username:null==ef?void 0:ef.username,isLicenseDrawer:H};null===(t=window.NREUM)||void 0===t||null===(n=t.noticeError)||void 0===n||n.call(t,e,a)},[ev,ef,H]),eA=ee({couponCode:eZ,displayInlineCancellationFlow:[d.q].includes(eo)}),eM=(0,L.d)(),ez=(0,c.Z)((0,J.useState)({status:"",error:void 0}),2),eF=ez[0],eU=ez[1],eL=(0,J.useCallback)((0,i.Z)(function(){var e,t,i,c,v;return(0,s.__generator)(this,function(s){switch(s.label){case 0:if(s.trys.push([0,3,,4]),E({status:"",error:void 0}),eU({status:"",error:void 0}),eb(!0),em&&u.Tj5.includes(eZ))throw Error("free trial offer not available in India");if(!eI)return[3,2];return e=n?{assets:[{asset:n,selectedAssetSize:(0,_.DW)({assetType:(0,D.Tp)(n),assetSize:a})}]}:{},t=[],eo===d.q?t.push({product:{id:Y(),type:"products"},cancellationReason:eo,cancellationReasonName:eu,subscriptionIdentifier:er}):(t.push((0,l.Z)((0,o.Z)({},e),{product:ew,productType:x})),null!=eo&&null!=er&&t.push({product:{id:V(),type:"products"},cancellationReason:eo,cancellationReasonName:eu,subscriptionIdentifier:er})),[4,j({country:ep,currency:ex||eE,paymentProfileId:null==eS?void 0:eS.paymentId,orderItems:t,selectedShadowsOption:ea,vatNumber:O,couponCode:eZ,license:R,debitableIdentifier:eT,freeTrialCredits:ec,freeTrialDuration:ed,showP32433Cad:ek,configs:{headers:(0,r.Z)({},m.yx,ey)}})];case 1:i=s.sent().data,E({status:p.MR,error:void 0}),eU({status:p.MR,error:void 0}),eb(!1),eA({orderId:i.id}),eM({actionName:"convert - order creation success",customAttributes:{productName:ew.name,productType:x,country:ep,currency:ex||eE,assetType:(0,D.Tp)(n),assetSize:a,license:R,isLicenseDrawer:H}}),s.label=2;case 2:return[3,4];case 3:return c=s.sent(),E({status:p.cM,error:c}),eU({status:p.cM,error:c}),eb(!1),(null==c?void 0:null===(v=c.detail)||void 0===v?void 0:v.toLowerCase())===f.LQ&&I(!0),eP(c),[3,4];case 4:return[2]}})}),[E,em,eZ,eI,n,a,ep,ex,eE,null==eS?void 0:eS.paymentId,ew,x,O,R,eT,eA,eM,H,eP,I,ea,er,ek,eo,ec,ed,eu,ey]);return{createOrderHandler:eh?eL:ej,isCreateOrderInProgress:e_,product:ew,orderStatus:eF}}}}]);
//# sourceMappingURL=67601-7775fd0b139e2ce2.js.map